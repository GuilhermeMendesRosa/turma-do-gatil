<!-- Diálogo de Detalhes do Gato -->
<p-dialog 
  [(visible)]="visible" 
  [modal]="true" 
  [closable]="true"
  [draggable]="false"
  [resizable]="false"
  styleClass="cat-details-dialog"
  maskStyleClass="blur-backdrop"
  [style]="{width: '90vw', maxWidth: '800px'}"
  header="Perfil do Gato"
  (onHide)="onHide()">
  
  <div class="cat-profile-container" *ngIf="cat">
    <!-- Cabeçalho do perfil -->
    <div class="cat-profile-header">
      <div class="cat-profile-image">
        <img 
          [src]="cat.photoUrl || getDefaultImage()" 
          [alt]="cat.name"
          (error)="onImageError($event)"
          class="profile-image">
        
        <!-- Status de adoção -->
        <div class="profile-status">
          <div class="status-badge" [class]="cat.adoptionStatus.toLowerCase().replace('_', '-')">
            <i class="fas" [class]="getAdoptionStatusIcon(cat.adoptionStatus)"></i>
            <span>{{ getAdoptionStatusText(cat.adoptionStatus) }}</span>
          </div>
        </div>
      </div>
      
      <div class="cat-profile-info">
        <h2 class="cat-profile-name">{{ cat.name }}</h2>
        <div class="cat-profile-age">{{ getAge(cat.birthDate) }}</div>
        
        <div class="quick-info">
          <div class="quick-info-item">
            <i class="fas fa-palette"></i>
            <span>{{ getColorLabel(cat.color) }}</span>
          </div>
          <div class="quick-info-item">
            <i class="fas" [class.fa-mars]="cat.sex === 'MALE'" [class.fa-venus]="cat.sex === 'FEMALE'"></i>
            <span>{{ getSexLabel(cat.sex) }}</span>
          </div>
        </div>
      </div>
    </div>

    <p-divider></p-divider>

    <!-- Informações detalhadas -->
    <div class="cat-profile-details">
      <h3>
        <i class="fas fa-info-circle"></i>
        Informações Detalhadas
      </h3>
      
      <div class="details-grid">
        <div class="detail-card">
          <div class="detail-label">
            <i class="fas fa-birthday-cake"></i>
            Data de Nascimento
          </div>
          <div class="detail-value">{{ formatDate(cat.birthDate) }}</div>
        </div>

        <div class="detail-card">
          <div class="detail-label">
            <i class="fas fa-calendar-plus"></i>
            Entrada no Abrigo
          </div>
          <div class="detail-value">{{ formatDate(cat.shelterEntryDate) }}</div>
        </div>

        <div class="detail-card">
          <div class="detail-label">
            <i class="fas fa-clock"></i>
            Tempo no Abrigo
          </div>
          <div class="detail-value">{{ getDaysInShelter(cat.shelterEntryDate) }} dias</div>
        </div>

        <div class="detail-card">
          <div class="detail-label">
            <i class="fas fa-palette"></i>
            Cor
          </div>
          <div class="detail-value">{{ getColorLabel(cat.color) }}</div>
        </div>

        <div class="detail-card">
          <div class="detail-label">
            <i class="fas" [class.fa-mars]="cat.sex === 'MALE'" [class.fa-venus]="cat.sex === 'FEMALE'"></i>
            Sexo
          </div>
          <div class="detail-value">{{ getSexLabel(cat.sex) }}</div>
        </div>

        <div class="detail-card">
          <div class="detail-label">
            <i class="fas fa-heart"></i>
            Status de Adoção
          </div>
          <div class="detail-value">
            <p-tag 
              [value]="getAdoptionTagText(cat.adoptionStatus)" 
              [severity]="getAdoptionTagSeverity(cat.adoptionStatus)">
            </p-tag>
          </div>
        </div>
      </div>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="dialog-footer">
      <div class="action-buttons">
        <p-button 
          *ngIf="cat?.adoptionStatus === 'NAO_ADOTADO'"
          label="Adotar" 
          icon="pi pi-heart" 
          (onClick)="onAdoptCat()"
          pTooltip="Registrar adoção do gato">
        </p-button>
        
        <p-button 
          label="Editar" 
          icon="pi pi-pencil" 
          severity="secondary"
          (onClick)="onEditCat()"
          pTooltip="Editar informações do gato">
        </p-button>
        
        <p-button 
          label="Deletar" 
          icon="pi pi-trash" 
          severity="danger"
          [outlined]="true"
          (onClick)="onDeleteCat()"
          pTooltip="Remover gato do sistema">
        </p-button>
      </div>
    </div>
  </ng-template>
</p-dialog>

<!-- Modal de Adoção -->
<app-adoption-modal
  [(visible)]="showAdoptionModal"
  [cat]="cat"
  (adoptionCreated)="onAdoptionCreated()">
</app-adoption-modal>
