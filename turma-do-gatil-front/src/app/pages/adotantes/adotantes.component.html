<div class="page-container">
  <app-page-header
    title="Gestão de Adotantes"
    subtitle="Gerencie as informações dos adotantes cadastrados no sistema"
    icon="pi-users">
  </app-page-header>

  <!-- Filtros -->
  <app-content-card
    title="Filtros de Busca"
    icon="pi-filter"
    [hasActions]="true">
    
    <div slot="actions">
      <p-button 
        label="Novo Adotante" 
        icon="pi pi-plus" 
        (onClick)="openCreateModal()"
        size="small">
      </p-button>
    </div>
    
    <div class="filters-grid">
      <div class="filter-group">
        <label for="nameFilter">
          <i class="pi pi-search"></i>
          Nome do Adotante
        </label>
        <input 
          id="nameFilter"
          type="text" 
          pInputText 
          [(ngModel)]="filters.name" 
          (ngModelChange)="onFilterChange()"
          placeholder="Digite o nome..."
          class="filter-input">
      </div>
    </div>
  </app-content-card>
  
  <!-- Tabela de Adotantes -->
  <app-content-card
    title="Lista de Adotantes"
    icon="pi-list"
    [hasActions]="true"
    [hasFooter]="true">
    
    <div slot="actions">
      <app-refresh-button 
        [loading]="loading"
        (refresh)="loadAdopters()">
      </app-refresh-button>
    </div>

    <div *ngIf="!loading; else loadingTemplate">
      <app-data-table
        [columns]="adoptersTableColumns"
        [data]="adopters"
        [loading]="loading"
        [emptyState]="emptyState"
        [actionProvider]="getAdopterActions"
        trackByProperty="id"
        (actionClick)="onAdopterTableAction($event)">
      </app-data-table>
    </div>

    <!-- Paginação -->
    <div slot="footer" *ngIf="totalRecords > 0">
      <app-pagination
        [pagination]="getPaginationInfo()"
        (pageChange)="goToPage({target: {value: $event}})"
        (previousPage)="previousPage()"
        (nextPage)="nextPage()">
      </app-pagination>
    </div>
  </app-content-card>

  <ng-template #loadingTemplate>
    <div class="loading-message">
      <i class="pi pi-spinner"></i>
      Carregando adotantes...
    </div>
  </ng-template>
</div>

<!-- Modal de Criação/Edição de Adotante -->
<app-adopter-create-modal
  [(visible)]="showCreateModal"
  [adopter]="selectedAdopter"
  (adopterCreated)="onAdopterCreated()"
  (adopterUpdated)="onAdopterUpdated()">
</app-adopter-create-modal>
