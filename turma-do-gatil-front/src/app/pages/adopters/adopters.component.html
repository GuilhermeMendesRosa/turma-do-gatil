<div class="page-container">
  <!-- ==================== CABEÇALHO DA PÁGINA ==================== -->
  <app-page-header
    title="Gestão de Adotantes"
    subtitle="Gerencie as informações dos adotantes cadastrados no sistema"
    icon="pi-users">
  </app-page-header>

  <!-- ==================== SEÇÃO DE FILTROS ==================== -->
  <app-content-card
    title="Filtros de Busca"
    icon="pi-filter"
    [hasActions]="true">
    
    <div slot="actions">
      <app-modal-button 
        [config]="getNewAdopterButtonConfig()">
      </app-modal-button>
    </div>
    
    <div class="filters-grid">
      <div class="filter-group">
        <label for="nameFilter">
          <i class="pi pi-search"></i>
          Nome do Adotante
        </label>
        <input 
          id="nameFilter"
          type="text" 
          pInputText 
          [(ngModel)]="filters.name" 
          (ngModelChange)="onFilterChange()"
          placeholder="Digite o nome..."
          class="filter-input">
      </div>
    </div>
  </app-content-card>
  
  <!-- ==================== TABELA DE ADOTANTES ==================== -->
  <app-content-card
    title="Lista de Adotantes"
    icon="pi-list"
    [hasActions]="true"
    [hasFooter]="true">
    
    <div slot="actions">
      <app-refresh-button 
        [loading]="loading"
        (refresh)="loadAdopters()">
      </app-refresh-button>
    </div>

    <!-- Conteúdo da tabela -->
    <app-loading-state [loading]="loading" message="Carregando adotantes...">
      <app-data-table
        [columns]="adoptersTableColumns"
        [data]="adopters"
        [loading]="loading"
        [emptyState]="emptyState"
        [actionProvider]="getAdopterActions"
        trackByProperty="id"
        (actionClick)="onAdopterTableAction($event)">
      </app-data-table>
    </app-loading-state>

    <!-- Paginação -->
    <div slot="footer" *ngIf="totalRecords > 0">
      <app-pagination
        [pagination]="getPaginationInfo()"
        (pageChange)="goToPage({target: {value: $event}})"
        (previousPage)="previousPage()"
        (nextPage)="nextPage()">
      </app-pagination>
    </div>
  </app-content-card>
</div>

<!-- ==================== MODAL DE CRIAÇÃO/EDIÇÃO ==================== -->
<app-adopter-create-modal
  [(visible)]="showCreateModal"
  [adopter]="selectedAdopter"
  (adopterCreated)="onAdopterSaved()"
  (adopterUpdated)="onAdopterSaved()">
</app-adopter-create-modal>

<!-- ==================== MODAL DE CONFIRMAÇÃO DE EXCLUSÃO ==================== -->
<app-confirmation-modal
  [(visible)]="confirmationModalVisible"
  [config]="confirmationConfig"
  (confirmed)="onConfirmationConfirmed()"
  (cancelled)="onConfirmationCancelled()">
</app-confirmation-modal>

<!-- ==================== MODAL DE DETALHES DO ADOTANTE ==================== -->
<app-adopter-details-modal
  [(visible)]="showDetailsModal"
  [adopter]="selectedAdopter">
</app-adopter-details-modal>
