<!-- Header - Escondido na pÃ¡gina de login -->
@if (!isLoginPage) {
<div class="header">
  <div class="header-left">
    <p-button 
      icon="pi pi-bars" 
      [text]="true" 
      (onClick)="toggleSidebar()"
      class="menu-button">
    </p-button>
    <div class="brand-section">
      <img 
        src="https://www.turmadogatil.com.br/wp-content/themes/website/assets/images/turma-do-gatil-colorido.webp" 
        alt="Turma do Gatil" 
        class="logo">
      <h2 class="app-title">Turma do Gatil</h2>
    </div>
  </div>
  
  <div class="header-right">
    @if (currentUser) {
    <div class="user-info">
      <p-avatar 
        [label]="getUserInitials()" 
        shape="circle" 
        class="user-avatar">
      </p-avatar>
    </div>
    }
    <p-button 
      icon="pi pi-cog" 
      [text]="true" 
      (onClick)="openSettingsModal()"
      class="settings-button"
      pTooltip="ConfiguraÃ§Ãµes">
    </p-button>
    <p-button 
      icon="pi pi-sign-out" 
      [text]="true" 
      (onClick)="logout()"
      class="logout-button"
      severity="danger">
    </p-button>
  </div>
</div>

<!-- Sidebar Menu - Escondido na pÃ¡gina de login -->
<div class="sidebar-overlay" [class.visible]="sidebarVisible" (click)="toggleSidebar()"></div>
<div class="sidebar" [class.visible]="sidebarVisible">
  <div class="sidebar-header">
    <h3>Menu</h3>
    <p-button 
      icon="pi pi-times" 
      [text]="true" 
      (onClick)="toggleSidebar()"
      class="close-button">
    </p-button>
  </div>
  
  <div class="sidebar-content">
    <ul class="menu-list">
      @for (item of menuItems; track item.label) {
      <li class="menu-item">
        <a [routerLink]="item.routerLink" 
           class="menu-link" 
           [class.active]="isMenuItemActive(item.routerLink)"
           (click)="toggleSidebar()">
          <i [class]="item.icon"></i>
          <span>{{ item.label }}</span>
        </a>
      </li>
      }
    </ul>
  </div>
</div>
}

<!-- Main Content -->
<div class="main-content" [class.sidebar-open]="sidebarVisible" [class.login-page]="isLoginPage">
  <div class="content-wrapper" [class.login-wrapper]="isLoginPage">
    <router-outlet></router-outlet>
  </div>
</div>

<!-- Footer - Escondido na pÃ¡gina de login -->
@if (!isLoginPage) {
<footer class="footer">
  Desenvolvido por&nbsp;<a href="https://github.com/GuilhermeMendesRosa/" target="_blank">Guilherme</a>&nbsp;ðŸŒ¹
</footer>
}

<!-- Modal de ConfiguraÃ§Ãµes -->
<p-dialog 
  header="ConfiguraÃ§Ãµes de CastraÃ§Ã£o" 
  [(visible)]="settingsModalVisible" 
  [modal]="true" 
  [style]="{width: '400px'}"
  [closable]="true"
  [draggable]="false"
  styleClass="tdg-modal"
  maskStyleClass="tdg-modal-mask">
  
  <div class="form-section">
    <div class="form-grid">
      <!-- Dia MÃ­nimo -->
      <div class="form-field">
        <label for="minDays">Dia MÃ­nimo para CastraÃ§Ã£o</label>
        <p-inputNumber 
          id="minDays" 
          [(ngModel)]="minDays" 
          [min]="1" 
          [max]="365" 
          suffix=" dias"
          class="form-input">
        </p-inputNumber>
      </div>

      <!-- Dia MÃ¡ximo -->
      <div class="form-field">
        <label for="maxDays">Dia MÃ¡ximo para CastraÃ§Ã£o</label>
        <p-inputNumber 
          id="maxDays" 
          [(ngModel)]="maxDays" 
          [min]="1" 
          [max]="365" 
          suffix=" dias"
          class="form-input">
        </p-inputNumber>
      </div>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="dialog-footer">
      <div class="action-buttons">
        <app-generic-button 
          [config]="dynamicSaveButtonConfig"
          (click)="saveSettings()">
        </app-generic-button>
      </div>
    </div>
  </ng-template>
</p-dialog>

<!-- Toast Global para notificaÃ§Ãµes -->
<p-toast position="top-right" [style]="{'z-index': '9999'}"></p-toast>
