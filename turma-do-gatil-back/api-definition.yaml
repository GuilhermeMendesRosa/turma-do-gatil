openapi: 3.0.3
info:
  title: Turma do Gatil - API
  description: API REST para gerenciamento do sistema Turma do Gatil - Sistema de adoção de gatos
  version: 1.0.0
  contact:
    name: Equipe Turma do Gatil
    email: contato@turmadogatil.com
  license:
    name: MIT License
    url: https://choosealicense.com/licenses/mit/
  termsOfService: https://turmadogatil.com/terms

servers:
  - url: https://turma-do-gatil-production.up.railway.app
    description: Servidor de Desenvolvimento

tags:
  - name: Authentication
    description: Operações de autenticação e registro de usuários
  - name: Cats
    description: Operações relacionadas aos gatos
  - name: Adopters
    description: Operações relacionadas aos adotantes
  - name: Adoptions
    description: Operações relacionadas às adoções
  - name: Notes
    description: Operações relacionadas às anotações
  - name: Sterilizations
    description: Operações relacionadas às esterilizações
  - name: Images
    description: Operações relacionadas ao upload de imagens

paths:
  /api/auth/register:
    post:
      tags:
        - Authentication
      summary: Registra um novo usuário
      description: Cria um novo usuário no sistema
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserRequest'
      responses:
        '201':
          description: Usuário criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '400':
          description: Dados inválidos ou username já existe
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/auth/login:
    post:
      tags:
        - Authentication
      summary: Realiza login
      description: Autentica um usuário e retorna um token JWT
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Login realizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '401':
          description: Credenciais inválidas
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '400':
          description: Dados inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/cats:
    get:
      tags:
        - Cats
      summary: Lista todos os gatos
      description: Retorna uma lista paginada de gatos com filtros opcionais
      parameters:
        - name: page
          in: query
          description: Número da página (inicia em 0)
          required: false
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          description: Quantidade de itens por página
          required: false
          schema:
            type: integer
            default: 10
        - name: sortBy
          in: query
          description: Campo para ordenação
          required: false
          schema:
            type: string
            default: name
        - name: sortDir
          in: query
          description: Direção da ordenação
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: asc
        - name: name
          in: query
          description: Filtro por nome do gato
          required: false
          schema:
            type: string
        - name: color
          in: query
          description: Filtro por cor do gato
          required: false
          schema:
            $ref: '#/components/schemas/Color'
        - name: sex
          in: query
          description: Filtro por sexo do gato
          required: false
          schema:
            $ref: '#/components/schemas/Sex'
        - name: adoptionStatus
          in: query
          description: Filtro por status de adoção
          required: false
          schema:
            $ref: '#/components/schemas/CatAdoptionStatus'
      responses:
        '200':
          description: Lista de gatos retornada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageCat'
    post:
      tags:
        - Cats
      summary: Cria um novo gato
      description: Adiciona um novo gato ao sistema
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CatRequest'
      responses:
        '201':
          description: Gato criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cat'
        '400':
          description: Dados inválidos

  /api/cats/{id}:
    get:
      tags:
        - Cats
      summary: Busca gato por ID
      description: Retorna um gato específico pelo seu ID
      parameters:
        - name: id
          in: path
          required: true
          description: ID único do gato
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Gato encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cat'
        '404':
          description: Gato não encontrado
    put:
      tags:
        - Cats
      summary: Atualiza um gato
      description: Atualiza os dados de um gato existente
      parameters:
        - name: id
          in: path
          required: true
          description: ID único do gato
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CatRequest'
      responses:
        '200':
          description: Gato atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cat'
        '404':
          description: Gato não encontrado
        '400':
          description: Dados inválidos
    delete:
      tags:
        - Cats
      summary: Remove um gato
      description: Remove um gato do sistema
      parameters:
        - name: id
          in: path
          required: true
          description: ID único do gato
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Gato removido com sucesso
        '404':
          description: Gato não encontrado

  /api/cats/needing-sterilization:
    get:
      tags:
        - Cats
      summary: Busca gatos que precisam de castração
      description: |
        Retorna uma lista de gatos que estão aptos para castração baseado nas seguintes regras:
        
        **Critérios de Elegibilidade:**
        - Gato deve ter pelo menos **90 dias de vida**
        - Gato **não deve ter sido castrado** (status COMPLETED)
        - Gato **não deve ter castração agendada** (status SCHEDULED)
        - Apenas gatos **não adotados** são considerados
        
        **Status Retornados:**
        - `ELIGIBLE`: Gato com 90-179 dias, apto para castração
        - `OVERDUE`: Gato com 180+ dias, castração atrasada
        
        **Informações Retornadas:**
        - Dados básicos do gato (nome, cor, sexo, foto)
        - Idade exata em dias
        - Status de prioridade para castração
      responses:
        '200':
          description: Lista de gatos que precisam de castração retornada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CatSterilizationStatus'
        '500':
          description: Erro interno do servidor ao processar a solicitação
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Internal server error"

  /api/cats/sterilization-stats:
    get:
      tags:
        - Cats
      summary: Obter estatísticas de castração
      description: |
        Retorna as estatísticas resumidas sobre gatos que precisam de castração:
        
        **Informações Retornadas:**
        - `eligibleCount`: Quantidade de gatos elegíveis para castração (90-179 dias)
        - `overdueCount`: Quantidade de gatos com castração atrasada (180+ dias)
        - `totalNeedingSterilization`: Total de gatos que precisam de castração
        
        **Critérios Aplicados:**
        - Apenas gatos não adotados
        - Gatos com pelo menos 90 dias de vida
        - Excluídos gatos já castrados ou com castração agendada
      responses:
        '200':
          description: Estatísticas de castração retornadas com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SterilizationStats'
        '500':
          description: Erro interno do servidor ao processar a solicitação
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Internal server error"

  /api/cats/dashboard-summary:
    get:
      tags:
        - Cats
      summary: Obter resumo do dashboard
      description: |
        Retorna um resumo otimizado para dashboards com contadores das principais informações do sistema:
        
        **Informações Incluídas:**
        - `availableCatsCount`: Quantidade total de gatos disponíveis para adoção (não adotados)
        - `pendingSterilizationsCount`: Quantidade total de castrações pendentes (status SCHEDULED)
        - `registeredAdoptersCount`: Quantidade total de adotantes cadastrados no sistema
        
        **Características:**
        - Performance otimizada com queries de contagem
        - Sem limitação de paginação nos resultados
        - Dados em tempo real sem caching
        - Ideal para dashboards e telas de resumo
        
        **Utilidade:**
        - Monitoramento rápido do status do abrigo
        - Métricas para tomada de decisões
        - Visão consolidada e performática do sistema
      responses:
        '200':
          description: Resumo do dashboard retornado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DashboardSummary'
              example:
                availableCatsCount: 25
                pendingSterilizationsCount: 8
                registeredAdoptersCount: 142
        '500':
          description: Erro interno do servidor ao processar a solicitação
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Internal server error"

  /api/cats/cat-summary:
    get:
      tags:
        - Cats
      summary: Obter resumo dos gatos
      description: |
        Retorna um resumo dos contadores de gatos agrupados por status de adoção:
        
        **Informações Retornadas:**
        - `availableCatsCount`: Quantidade de gatos disponíveis para adoção (não adotados)
        - `adoptedCatsCount`: Quantidade de gatos já adotados
        - `inProcessCatsCount`: Quantidade de gatos em processo de adoção
        - `totalCatsCount`: Quantidade total de gatos no sistema
        
        **Características:**
        - Performance otimizada com queries de contagem
        - Sem limitação de paginação nos resultados
        - Dados em tempo real sem caching
        - Ideal para dashboards e telas de resumo
      responses:
        '200':
          description: Resumo dos gatos retornado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CatSummary'
              example:
                availableCatsCount: 15
                adoptedCatsCount: 8
                inProcessCatsCount: 2
                totalCatsCount: 25
        '500':
          description: Erro interno do servidor ao processar a solicitação
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Internal server error"

  /api/sterilizations:
    get:
      tags:
        - Sterilizations
      summary: Lista todas as esterilizações
      description: Retorna uma lista paginada de esterilizações com filtros opcionais
      parameters:
        - name: page
          in: query
          description: Número da página
          required: false
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          description: Quantidade de itens por página
          required: false
          schema:
            type: integer
            default: 10
        - name: sortBy
          in: query
          description: Campo para ordenação
          required: false
          schema:
            type: string
            default: sterilizationDate
        - name: sortDir
          in: query
          description: Direção da ordenação
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: desc
        - name: catId
          in: query
          description: Filtro por ID do gato
          required: false
          schema:
            type: string
            format: uuid
        - name: status
          in: query
          description: Filtro por status da esterilização
          required: false
          schema:
            $ref: '#/components/schemas/SterilizationStatus'
        - name: startDate
          in: query
          description: Data inicial para filtro por período
          required: false
          schema:
            type: string
            format: date-time
        - name: endDate
          in: query
          description: Data final para filtro por período
          required: false
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: Lista de esterilizações retornada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageSterilization'
    post:
      tags:
        - Sterilizations
      summary: Cria uma nova esterilização
      description: Registra uma nova esterilização no sistema
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SterilizationRequest'
      responses:
        '201':
          description: Esterilização criada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sterilization'
        '400':
          description: Dados inválidos

  /api/sterilizations/{id}:
    get:
      tags:
        - Sterilizations
      summary: Busca esterilização por ID
      description: Retorna uma esterilização específica pelo seu ID
      parameters:
        - name: id
          in: path
          required: true
          description: ID único da esterilização
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Esterilização encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sterilization'
        '404':
          description: Esterilização não encontrada
    put:
      tags:
        - Sterilizations
      summary: Atualiza uma esterilização
      description: Atualiza os dados de uma esterilização existente
      parameters:
        - name: id
          in: path
          required: true
          description: ID único da esterilização
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SterilizationRequest'
      responses:
        '200':
          description: Esterilização atualizada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Sterilization'
        '404':
          description: Esterilização não encontrada
        '400':
          description: Dados inválidos
    delete:
      tags:
        - Sterilizations
      summary: Remove uma esterilização
      description: Remove uma esterilização do sistema
      parameters:
        - name: id
          in: path
          required: true
          description: ID único da esterilização
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Esterilização removida com sucesso
        '404':
          description: Esterilização não encontrada

  /api/sterilizations/cat/{catId}:
    get:
      tags:
        - Sterilizations
      summary: Busca esterilizações por gato
      description: Retorna todas as esterilizações de um gato específico
      parameters:
        - name: catId
          in: path
          required: true
          description: ID único do gato
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Lista de esterilizações do gato
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Sterilization'
        '404':
          description: Gato não encontrado

  /api/sterilizations/status/{status}:
    get:
      tags:
        - Sterilizations
      summary: Busca esterilizações por status
      description: Retorna esterilizações filtradas por status específico
      parameters:
        - name: status
          in: path
          required: true
          description: Status da esterilização
          schema:
            $ref: '#/components/schemas/SterilizationStatus'
        - name: page
          in: query
          description: Número da página
          required: false
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          description: Quantidade de itens por página
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Lista de esterilizações por status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageSterilization'

  /api/adopters:
    get:
      tags:
        - Adopters
      summary: Lista todos os adotantes
      description: Retorna uma lista paginada de adotantes com filtros opcionais
      parameters:
        - name: page
          in: query
          description: Número da página
          required: false
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          description: Quantidade de itens por página
          required: false
          schema:
            type: integer
            default: 10
        - name: sortBy
          in: query
          description: Campo para ordenação
          required: false
          schema:
            type: string
            default: firstName
        - name: sortDir
          in: query
          description: Direção da ordenação
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: asc
        - name: name
          in: query
          description: Filtro por nome do adotante
          required: false
          schema:
            type: string
        - name: email
          in: query
          description: Filtro por email do adotante
          required: false
          schema:
            type: string
        - name: cpf
          in: query
          description: Filtro por CPF do adotante
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Lista de adotantes retornada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageAdopter'
    post:
      tags:
        - Adopters
      summary: Cria um novo adotante
      description: Adiciona um novo adotante ao sistema
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdopterRequest'
      responses:
        '201':
          description: Adotante criado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Adopter'
        '400':
          description: Dados inválidos ou CPF/email já cadastrado

  /api/adopters/{id}:
    get:
      tags:
        - Adopters
      summary: Busca adotante por ID
      description: Retorna um adotante específico pelo seu ID
      parameters:
        - name: id
          in: path
          required: true
          description: ID único do adotante
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Adotante encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Adopter'
        '404':
          description: Adotante não encontrado
    put:
      tags:
        - Adopters
      summary: Atualiza um adotante
      description: Atualiza os dados de um adotante existente
      parameters:
        - name: id
          in: path
          required: true
          description: ID único do adotante
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdopterRequest'
      responses:
        '200':
          description: Adotante atualizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Adopter'
        '404':
          description: Adotante não encontrado
        '400':
          description: Dados inválidos
    delete:
      tags:
        - Adopters
      summary: Remove um adotante
      description: Remove um adotante do sistema
      parameters:
        - name: id
          in: path
          required: true
          description: ID único do adotante
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Adotante removido com sucesso
        '404':
          description: Adotante não encontrado

  /api/adopters/cpf/{cpf}:
    get:
      tags:
        - Adopters
      summary: Busca adotante por CPF
      description: Retorna um adotante específico pelo seu CPF
      parameters:
        - name: cpf
          in: path
          required: true
          description: CPF do adotante
          schema:
            type: string
      responses:
        '200':
          description: Adotante encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Adopter'
        '404':
          description: Adotante não encontrado

  /api/adopters/email/{email}:
    get:
      tags:
        - Adopters
      summary: Busca adotante por email
      description: Retorna um adotante específico pelo seu email
      parameters:
        - name: email
          in: path
          required: true
          description: Email do adotante
          schema:
            type: string
            format: email
      responses:
        '200':
          description: Adotante encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Adopter'
        '404':
          description: Adotante não encontrado

  /api/adoptions:
    get:
      tags:
        - Adoptions
      summary: Lista todas as adoções
      description: Retorna uma lista paginada de adoções com filtros opcionais
      parameters:
        - name: page
          in: query
          description: Número da página
          required: false
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          description: Quantidade de itens por página
          required: false
          schema:
            type: integer
            default: 10
        - name: sortBy
          in: query
          description: Campo para ordenação
          required: false
          schema:
            type: string
            default: adoptionDate
        - name: sortDir
          in: query
          description: Direção da ordenação
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: desc
        - name: status
          in: query
          description: Filtro por status da adoção
          required: false
          schema:
            $ref: '#/components/schemas/AdoptionStatus'
        - name: catId
          in: query
          description: Filtro por ID do gato
          required: false
          schema:
            type: string
            format: uuid
        - name: adopterId
          in: query
          description: Filtro por ID do adotante
          required: false
          schema:
            type: string
            format: uuid
        - name: startDate
          in: query
          description: Data inicial para filtro por período
          required: false
          schema:
            type: string
            format: date-time
        - name: endDate
          in: query
          description: Data final para filtro por período
          required: false
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: Lista de adoções retornada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageAdoption'
    post:
      tags:
        - Adoptions
      summary: Cria uma nova adoção
      description: Registra uma nova adoção no sistema
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdoptionRequest'
      responses:
        '201':
          description: Adoção criada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Adoption'
        '400':
          description: Dados inválidos

  /api/adoptions/{id}:
    get:
      tags:
        - Adoptions
      summary: Busca adoção por ID
      description: Retorna uma adoção específica pelo seu ID
      parameters:
        - name: id
          in: path
          required: true
          description: ID único da adoção
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Adoção encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Adoption'
        '404':
          description: Adoção não encontrada
    put:
      tags:
        - Adoptions
      summary: Atualiza uma adoção
      description: Atualiza os dados de uma adoção existente
      parameters:
        - name: id
          in: path
          required: true
          description: ID único da adoção
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdoptionRequest'
      responses:
        '200':
          description: Adoção atualizada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Adoption'
        '404':
          description: Adoção não encontrada
        '400':
          description: Dados inválidos
    delete:
      tags:
        - Adoptions
      summary: Remove uma adoção
      description: Remove uma adoção do sistema
      parameters:
        - name: id
          in: path
          required: true
          description: ID único da adoção
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Adoção removida com sucesso
        '404':
          description: Adoção não encontrada

  /api/adoptions/cat/{catId}:
    get:
      tags:
        - Adoptions
      summary: Busca adoções por ID do gato
      description: Retorna todas as adoções de um gato específico
      parameters:
        - name: catId
          in: path
          required: true
          description: ID único do gato
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Lista de adoções do gato
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Adoption'
        '404':
          description: Gato não encontrado

  /api/adoptions/adopter/{adopterId}:
    get:
      tags:
        - Adoptions
      summary: Busca adoções por ID do adotante
      description: Retorna todas as adoções de um adotante específico
      parameters:
        - name: adopterId
          in: path
          required: true
          description: ID único do adotante
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Lista de adoções do adotante
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Adoption'
        '404':
          description: Adotante não encontrado

  /api/adoptions/status/{status}:
    get:
      tags:
        - Adoptions
      summary: Busca adoções por status
      description: Retorna adoções filtradas por status específico
      parameters:
        - name: status
          in: path
          required: true
          description: Status da adoção
          schema:
            $ref: '#/components/schemas/AdoptionStatus'
        - name: page
          in: query
          description: Número da página
          required: false
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          description: Quantidade de itens por página
          required: false
          schema:
            type: integer
            default: 10
        - name: sortBy
          in: query
          description: Campo para ordenação
          required: false
          schema:
            type: string
            default: adoptionDate
        - name: sortDir
          in: query
          description: Direção da ordenação
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: desc
      responses:
        '200':
          description: Lista de adoções por status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageAdoption'

  /api/notes:
    get:
      tags:
        - Notes
      summary: Lista todas as anotações
      description: Retorna uma lista paginada de anotações com filtros opcionais
      parameters:
        - name: page
          in: query
          description: Número da página
          required: false
          schema:
            type: integer
            default: 0
        - name: size
          in: query
          description: Quantidade de itens por página
          required: false
          schema:
            type: integer
            default: 10
        - name: sortBy
          in: query
          description: Campo para ordenação
          required: false
          schema:
            type: string
            default: date
        - name: sortDir
          in: query
          description: Direção da ordenação
          required: false
          schema:
            type: string
            enum: [asc, desc]
            default: desc
        - name: catId
          in: query
          description: Filtro por ID do gato
          required: false
          schema:
            type: string
            format: uuid
        - name: text
          in: query
          description: Filtro por texto da anotação
          required: false
          schema:
            type: string
        - name: startDate
          in: query
          description: Data inicial para filtro por período
          required: false
          schema:
            type: string
            format: date-time
        - name: endDate
          in: query
          description: Data final para filtro por período
          required: false
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: Lista de anotações retornada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PageNote'
    post:
      tags:
        - Notes
      summary: Cria uma nova anotação
      description: Adiciona uma nova anotação ao sistema
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NoteRequest'
      responses:
        '201':
          description: Anotação criada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Note'
        '400':
          description: Dados inválidos

  /api/notes/{id}:
    get:
      tags:
        - Notes
      summary: Busca anotação por ID
      description: Retorna uma anotação específica pelo seu ID
      parameters:
        - name: id
          in: path
          required: true
          description: ID único da anotação
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Anotação encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Note'
        '404':
          description: Anotação não encontrada
    put:
      tags:
        - Notes
      summary: Atualiza uma anotação
      description: Atualiza os dados de uma anotação existente
      parameters:
        - name: id
          in: path
          required: true
          description: ID único da anotação
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NoteRequest'
      responses:
        '200':
          description: Anotação atualizada com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Note'
        '404':
          description: Anotação não encontrada
        '400':
          description: Dados inválidos
    delete:
      tags:
        - Notes
      summary: Remove uma anotação
      description: Remove uma anotação do sistema
      parameters:
        - name: id
          in: path
          required: true
          description: ID único da anotação
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Anotação removida com sucesso
        '404':
          description: Anotação não encontrada

  /api/notes/cat/{catId}:
    get:
      tags:
        - Notes
      summary: Busca anotações por ID do gato
      description: Retorna todas as anotações de um gato específico
      parameters:
        - name: catId
          in: path
          required: true
          description: ID único do gato
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Lista de anotações do gato
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Note'
        '404':
          description: Gato não encontrado

  /api/images/upload:
    post:
      tags:
        - Images
      summary: Faz upload de uma imagem
      description: Faz upload de uma imagem para o S3 e retorna a URL pré-assinada
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: Arquivo de imagem (JPEG, JPG, PNG, GIF, WebP - máximo 10MB)
              required:
                - file
      responses:
        '201':
          description: Upload realizado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ImageUploadResponse'
        '400':
          description: Erro de validação (arquivo vazio, tipo inválido ou tamanho excedido)
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "O arquivo é muito grande. Tamanho máximo: 10 MB"
        '500':
          description: Erro interno ao fazer upload
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Erro ao fazer upload da imagem"

components:
  schemas:
    Cat:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID único do gato
        name:
          type: string
          description: Nome do gato
        color:
          $ref: '#/components/schemas/Color'
        sex:
          $ref: '#/components/schemas/Sex'
        birthDate:
          type: string
          format: date-time
          description: Data de nascimento do gato
        shelterEntryDate:
          type: string
          format: date-time
          description: Data de entrada no abrigo
        photoUrl:
          type: string
          description: URL da foto do gato
        adopted:
          type: boolean
          description: Status de adoção do gato (compatibilidade)
        adoptionStatus:
          $ref: '#/components/schemas/CatAdoptionStatus'

    CatRequest:
      type: object
      required:
        - name
        - color
        - sex
        - birthDate
        - shelterEntryDate
      properties:
        name:
          type: string
          description: Nome do gato
        color:
          $ref: '#/components/schemas/Color'
        sex:
          $ref: '#/components/schemas/Sex'
        birthDate:
          type: string
          format: date-time
          description: Data de nascimento do gato
        shelterEntryDate:
          type: string
          format: date-time
          description: Data de entrada no abrigo
        photoUrl:
          type: string
          description: URL da foto do gato
        adopted:
          type: boolean
          default: false
          description: Status de adoção do gato (compatibilidade)
        adoptionStatus:
          $ref: '#/components/schemas/CatAdoptionStatus'
          default: NAO_ADOTADO

    Adopter:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID único do adotante
        firstName:
          type: string
          description: Primeiro nome do adotante
        lastName:
          type: string
          description: Sobrenome do adotante
        birthDate:
          type: string
          format: date-time
          description: Data de nascimento do adotante
        cpf:
          type: string
          description: CPF do adotante
        phone:
          type: string
          description: Telefone do adotante
        email:
          type: string
          format: email
          description: Email do adotante (opcional)
        instagram:
          type: string
          description: Instagram do adotante
        address:
          type: string
          description: Endereço do adotante
        registrationDate:
          type: string
          format: date-time
          description: Data de cadastro do adotante

    AdopterRequest:
      type: object
      required:
        - firstName
        - lastName
        - birthDate
        - cpf
        - phone
        - address
        - registrationDate
      properties:
        firstName:
          type: string
          description: Primeiro nome do adotante
        lastName:
          type: string
          description: Sobrenome do adotante
        birthDate:
          type: string
          format: date-time
          description: Data de nascimento do adotante
        cpf:
          type: string
          description: CPF do adotante (deve ser único)
        phone:
          type: string
          description: Telefone do adotante
        email:
          type: string
          format: email
          description: Email do adotante (opcional, mas deve ser único se fornecido)
        instagram:
          type: string
          description: Instagram do adotante
        address:
          type: string
          description: Endereço do adotante
        registrationDate:
          type: string
          format: date-time
          description: Data de cadastro do adotante

    Adoption:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID único da adoção
        catId:
          type: string
          format: uuid
          description: ID do gato adotado
        adopterId:
          type: string
          format: uuid
          description: ID do adotante
        adoptionDate:
          type: string
          format: date-time
          description: Data da adoção
        status:
          $ref: '#/components/schemas/AdoptionStatus'

    AdoptionRequest:
      type: object
      required:
        - catId
        - adopterId
        - adoptionDate
        - status
      properties:
        catId:
          type: string
          format: uuid
          description: ID do gato a ser adotado
        adopterId:
          type: string
          format: uuid
          description: ID do adotante
        adoptionDate:
          type: string
          format: date-time
          description: Data da adoção
        status:
          $ref: '#/components/schemas/AdoptionStatus'

    Note:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID único da anotação
        catId:
          type: string
          format: uuid
          description: ID do gato relacionado
        date:
          type: string
          format: date-time
          description: Data da anotação
        text:
          type: string
          description: Conteúdo da anotação

    NoteRequest:
      type: object
      required:
        - catId
        - date
        - text
      properties:
        catId:
          type: string
          format: uuid
          description: ID do gato relacionado à anotação
        date:
          type: string
          format: date-time
          description: Data da anotação
        text:
          type: string
          description: Conteúdo da anotação

    Sterilization:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID único da esterilização
        catId:
          type: string
          format: uuid
          description: ID do gato
        cat:
          type: string
          description: Nome do gato
        photoUrl:
          type: string
          format: uri
          description: URL da foto do gato
        sterilizationDate:
          type: string
          format: date-time
          description: Data da esterilização
        status:
          $ref: '#/components/schemas/SterilizationStatus'
        notes:
          type: string
          description: Observações sobre a esterilização

    Color:
      type: string
      enum:
        - WHITE
        - BLACK
        - GRAY
        - BROWN
        - ORANGE
        - MIXED
        - CALICO
        - TABBY
        - SIAMESE
        - OTHER
      description: Cor do gato

    Sex:
      type: string
      enum:
        - MALE
        - FEMALE
      description: Sexo do gato

    AdoptionStatus:
      type: string
      enum:
        - COMPLETED
        - CANCELED
        - PENDING
      description: Status da adoção

    CatAdoptionStatus:
      type: string
      enum:
        - NAO_ADOTADO
        - EM_PROCESSO
        - ADOTADO
      description: Status de adoção do gato

    SterilizationStatus:
      type: string
      enum:
        - SCHEDULED
        - COMPLETED
        - CANCELED
      description: Status da esterilização

    CatSterilizationStatus:
      type: object
      description: DTO que representa um gato com informações sobre seu status de castração
      properties:
        id:
          type: string
          format: uuid
          description: Identificador único do gato
          example: "550e8400-e29b-41d4-a716-446655440000"
        name:
          type: string
          description: Nome do gato
          example: "Mimi"
        color:
          $ref: '#/components/schemas/Color'
        sex:
          $ref: '#/components/schemas/Sex'
        birthDate:
          type: string
          format: date-time
          description: Data de nascimento do gato
          example: "2024-03-15T10:30:00"
        shelterEntryDate:
          type: string
          format: date-time
          description: Data de entrada no abrigo
          example: "2024-04-01T09:00:00"
        photoUrl:
          type: string
          description: URL da foto do gato
          example: "https://example.com/photos/mimi.jpg"
        ageInDays:
          type: integer
          description: Idade do gato em dias
          example: 120
        sterilizationStatus:
          $ref: '#/components/schemas/SterilizationEligibilityStatus'

    SterilizationEligibilityStatus:
      type: string
      enum:
        - ELIGIBLE
        - OVERDUE
      description: Status de elegibilidade para castração

    SterilizationStats:
      type: object
      description: DTO que representa as estatísticas de castração dos gatos
      properties:
        eligibleCount:
          type: integer
          format: int64
          description: Quantidade de gatos elegíveis para castração (90-179 dias)
          example: 15
        overdueCount:
          type: integer
          format: int64
          description: Quantidade de gatos com castração atrasada (180+ dias)
          example: 8
        totalNeedingSterilization:
          type: integer
          format: int64
          description: Total de gatos que precisam de castração
          example: 23

    DashboardSummary:
      type: object
      description: DTO que contém um resumo do dashboard com contadores de gatos disponíveis, castrações pendentes e adotantes
      properties:
        availableCatsCount:
          type: integer
          format: int64
          description: Quantidade total de gatos disponíveis para adoção
          example: 25
        pendingSterilizationsCount:
          type: integer
          format: int64
          description: Quantidade total de castrações pendentes/agendadas
          example: 8
        registeredAdoptersCount:
          type: integer
          format: int64
          description: Quantidade total de adotantes cadastrados no sistema
          example: 142

    CatSummary:
      type: object
      description: DTO que contém um resumo dos contadores de gatos agrupados por status de adoção
      properties:
        availableCatsCount:
          type: integer
          format: int64
          description: Quantidade de gatos disponíveis para adoção (não adotados)
          example: 15
        adoptedCatsCount:
          type: integer
          format: int64
          description: Quantidade de gatos já adotados
          example: 8
        inProcessCatsCount:
          type: integer
          format: int64
          description: Quantidade de gatos em processo de adoção
          example: 2
        totalCatsCount:
          type: integer
          format: int64
          description: Quantidade total de gatos no sistema
          example: 25

    SterilizationRequest:
      type: object
      required:
        - catId
        - sterilizationDate
        - status
      properties:
        catId:
          type: string
          format: uuid
          description: ID do gato a ser esterilizado
        sterilizationDate:
          type: string
          format: date-time
          description: Data da esterilização
        status:
          $ref: '#/components/schemas/SterilizationStatus'
        notes:
          type: string
          description: Observações sobre a esterilização

    PageCat:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/Cat'
        pageable:
          $ref: '#/components/schemas/Pageable'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        last:
          type: boolean
        first:
          type: boolean
        numberOfElements:
          type: integer
        size:
          type: integer
        number:
          type: integer

    PageAdopter:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/Adopter'
        pageable:
          $ref: '#/components/schemas/Pageable'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        last:
          type: boolean
        first:
          type: boolean
        numberOfElements:
          type: integer
        size:
          type: integer
        number:
          type: integer

    PageAdoption:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/Adoption'
        pageable:
          $ref: '#/components/schemas/Pageable'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        last:
          type: boolean
        first:
          type: boolean
        numberOfElements:
          type: integer
        size:
          type: integer
        number:
          type: integer

    PageSterilization:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/Sterilization'
        pageable:
          $ref: '#/components/schemas/Pageable'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        last:
          type: boolean
        first:
          type: boolean
        numberOfElements:
          type: integer
        size:
          type: integer
        number:
          type: integer

    PageNote:
      type: object
      properties:
        content:
          type: array
          items:
            $ref: '#/components/schemas/Note'
        pageable:
          $ref: '#/components/schemas/Pageable'
        totalElements:
          type: integer
          format: int64
        totalPages:
          type: integer
        last:
          type: boolean
        first:
          type: boolean
        numberOfElements:
          type: integer
        size:
          type: integer
        number:
          type: integer

    Pageable:
      type: object
      properties:
        sort:
          type: object
          properties:
            sorted:
              type: boolean
            unsorted:
              type: boolean
        pageNumber:
          type: integer
        pageSize:
          type: integer
        offset:
          type: integer
        paged:
          type: boolean
        unpaged:
          type: boolean

    ImageUploadResponse:
      type: object
      properties:
        fileName:
          type: string
          description: Nome original do arquivo enviado
          example: "gatinho_fofo.jpg"
        fileUrl:
          type: string
          description: URL pré-assinada da imagem no S3 (válida por 7 dias)
          example: "https://bucket-name.s3.amazonaws.com/images/uuid.jpg?X-Amz-..."
        fileSize:
          type: integer
          format: int64
          description: Tamanho do arquivo em bytes
          example: 2048576
        contentType:
          type: string
          description: Tipo MIME do arquivo
          example: "image/jpeg"
      required:
        - fileName
        - fileUrl
        - fileSize
        - contentType

    CreateUserRequest:
      type: object
      required:
        - username
        - name
        - password
      properties:
        username:
          type: string
          minLength: 3
          maxLength: 50
          description: Nome de usuário único
          example: "admin"
        name:
          type: string
          description: Nome completo do usuário
          example: "Administrador"
        password:
          type: string
          minLength: 6
          format: password
          description: Senha do usuário (mínimo 6 caracteres)
          example: "senha123"

    LoginRequest:
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
          description: Nome de usuário
          example: "admin"
        password:
          type: string
          format: password
          description: Senha do usuário
          example: "senha123"

    LoginResponse:
      type: object
      properties:
        token:
          type: string
          description: Token JWT para autenticação
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        username:
          type: string
          description: Nome de usuário autenticado
          example: "admin"
        name:
          type: string
          description: Nome completo do usuário
          example: "Administrador"
      required:
        - token
        - username
        - name

    UserResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: ID único do usuário
        username:
          type: string
          description: Nome de usuário
          example: "admin"
        name:
          type: string
          description: Nome completo do usuário
          example: "Administrador"
        createdAt:
          type: string
          format: date-time
          description: Data e hora de criação do usuário
      required:
        - id
        - username
        - name
        - createdAt

    ErrorResponse:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
          description: Data e hora do erro
        status:
          type: integer
          description: Código HTTP do status
          example: 400
        message:
          type: string
          description: Mensagem de erro
          example: "Username já existe"
        errors:
          type: object
          additionalProperties:
            type: string
          description: Detalhes dos erros de validação (quando aplicável)
        details:
          type: string
          description: Detalhes adicionais do erro

  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Token JWT obtido através do endpoint de login

security:
  - bearerAuth: []
